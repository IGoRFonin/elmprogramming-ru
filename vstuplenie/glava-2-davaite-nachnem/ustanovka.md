# Установка

Перед тем как мы начнем нам нужно установить и сконфигурировать несколько инструментов для изучения Elm.

### Установка node.js

Node.js - это среда выполнения JavaScript для создания в основном серверных приложений.

> #### Почему Node.js?
>
> Эта книга посвящена изучению языка для создания клиентских приложений. Так зачем мы должны устанавливать Node.js? На это есть две причины:
>
> * `elm-repl` - этот инструмент мы будем использовать позже для экспериментов с Elm, он компилирует Elm код в Javascript. Node.js представляет среду для запуска Javascript.
> * Node.js поставляется вместе с пакетным менеджером NPM\(**N**ode.js **P**ackage **M**anager\). Большинство инструментов и библиотек для создания клиентский приложений экосистемы Elm распространяются через `npm`пакеты. Поэтому вам нужно иметь это в своем арсенале, чтобы быть продуктивным Elm программистом.

Следуя [инструкции](https://nodejs.org/en/download/) на официальном сайте установите Node.js на ваш компьютер. Node.js поставляется вместе с NPM. То есть вам не обязательно устанавливать из раздельно. После установки выполните следующую команду в терминале, чтобы убедиться, что у вас установлен Node.js 4.0 или выше. Не имеет значения, из какой вкладки терминала вы запускаете эту команду.

```bash
$ node --version
```

### Установка Elm Platform

Elm Platform содержит множество инструментов, которые нам понадобятся для работы с Elm. Следуйте [инструкции](https://guide.elm-lang.org/install.html) с официального сайта для установки Elm Platform на ваш компьютер. После завершения установки выполните следующую команду в терминале, чтобы убедиться, что Elm установлен правильно. Также не имеет значения, из какой вкладки терминала вы запускаете эту команду.

```bash
$ elm --version
```

Вы должны увидеть номер версии Elm установленную на ваш компьютер. Мы будем использовать версию `0.19.0` на протяжении всей книги, если не будет указана другая версия.

### Редактор кода

Эта книга будет предлагать вам писать много кода. Часть кода будет выполнятся внутри терминала `elm-repl` . Часть будет сохранена в файл и затем скомпилирована. Elm не поставляется с редактором кода. Вы можете выбрать ваш любимый. Большинство редакторов кода не имеют поддержки синтаксиса и автозаполнение Elm из коробки, что могло бы значительно улучшить процесс написания кода. Вам придется установить плагин для этого. Выберите плагин для вашего редактора в разделе «[Конфигурация вашего редактора](https://guide.elm-lang.org/install.html)» в официальном руководстве.

{% hint style="info" %}
Поскольку символы табуляции являются ошибками синтаксиса в Elm, не забудьте настроить редактор для вставки пробелов при нажатии клавиши табуляции.
{% endhint %}

### Установка elm-format

Elm компилятор примет любую валидную программу, но сообщество Elm предпочитает, чтобы все программы были написаны в одном стиле. В большинстве языков мы должны помнить общий стиль и стараться следовать ему. Это не только занимает дополнительное место в нашем мозгу, но и отвлекает, когда мы находимся в процессе решения проблемы. `elm-format` решает эту проблему форматируя код в соответствии с набором правил, стандартизированных сообществом. Этакий `prettier` , но для Elm. Вам не обязательно его устанавливать, но я настоятельно рекомендую сделать это.

Установка `elm-format` очень легка. Просто запустите следующую команду в любом терминале.

```bash
$ npm install -g elm-format
```

Флаг `-g` сообщает, что надо установить пакет глобально, это значит мы может запускать `elm-format` из любой точки\(раздела\) терминала. Давайте посмотрим `elm-format` в действии. Создайте новый раздел\(папку\) `beginning-elm` . Не важно где вы его создадите. Создайте внутри него файл под названием `TestElmFormat.elm` и сохраните в него следующий код.

```haskell
module Main exposing (..)

import Html exposing (beginnerProgram, div, button, text)
import Html.Events exposing (onClick)


main =
  beginnerProgram {
    model = 0, view = view, update = update
  }

view model =
  div []
    [ button [onClick Decrement] [text "-"]
    , div [] [text (toString model)]
    , button [onClick Increment] [text "+"]
    ]

type Msg = Increment | Decrement
update msg model =
  case msg of
    Increment -> model + 1
    Decrement -> model - 1
```

{% hint style="info" %}
Не переживайте сейчас за то что написано в примере. Это для демонстрации как работает `elm-format .`
{% endhint %}

Хотя этот код и валиден для Elm компилятора, но соответсвует общепринятому стилю. Давайте применим `elm-format` чтобы исправить это. Зайдем в `beginning-elm` через терминал и запустим команду:

```bash
$ elm-format TestElmFormat.elm
```

Вы увидите следующее предупреждение.

```bash
This will overwrite the following files to use Elm's preferred style:

    TestElmFormat.elm

This cannot be undone! Make sure to back up these files before proceeding.

Are you sure you want to overwrite these files with formatted versions? (y/n)
```

Ответьте `y` . Теперь, если вы загляните внутрь файла `TestElmFormat.elm`, вы заметите, что `elm-format` отформатировал код, как показано ниже.

```haskell
module Main exposing (..)

import Html exposing (beginnerProgram, button, div, text)
import Html.Events exposing (onClick)


main =
    beginnerProgram
        { model = 0
        , view = view
        , update = update
        }


view model =
    div []
        [ button [ onClick Decrement ] [ text "-" ]
        , div [] [ text (toString model) ]
        , button [ onClick Increment ] [ text "+" ]
        ]


type Msg
    = Increment
    | Decrement


update msg model =
    case msg of
        Increment ->
            model + 1

        Decrement ->
            model - 1

```

Если вы хотите избежать предупреждения, то нужно запустить `elm-format` с флагом `--yes` .

```bash
$ elm-format TestElmFormat.elm --yes
```

### Использование elm-format в редакторе кода

Запускать каждый раз `elm-format` после изменения файла может быть утомительным. Поэтому большинство редакторов предлагают плагин для автоматического запуска его каждый раз, когда мы сохраняем Elm файл. Установите плагин для вашего редактора с [официального инструкции](https://github.com/avh4/elm-format#editor-integration). Некоторые плагины требуют, чтобы вы вручную включили формат при сохранении. Обязательно прочитайте инструкцию о том, как это сделать.



